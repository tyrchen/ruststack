[workspace]
members = ["crates/*", "apps/*", "tests/integration"]
exclude = ["codegen"]
resolver = "3"

[workspace.package]
version = "0.1.0"
edition = "2024"
license = "MIT"
authors = ["Tyr Chen <tyr.chen@gmail.com>"]
repository = "https://github.com/tyrchen/ruststack"

[workspace.lints.rust]
missing_docs = "warn"
missing_debug_implementations = "warn"

[workspace.lints.clippy]
pedantic = { level = "warn", priority = -1 }
module_name_repetitions = "allow"
missing_errors_doc = "allow"
missing_panics_doc = "allow"
doc_markdown = "allow"
collapsible_if = "allow"

[workspace.dependencies]
# Internal crates
ruststack-core = { path = "crates/ruststack-core" }
ruststack-auth = { path = "crates/ruststack-auth" }
ruststack-s3-core = { path = "crates/ruststack-s3-core" }
ruststack-s3-http = { path = "crates/ruststack-s3-http" }
ruststack-s3-model = { path = "crates/ruststack-s3-model" }
ruststack-s3-xml = { path = "crates/ruststack-s3-xml" }
ruststack-dynamodb-model = { path = "crates/ruststack-dynamodb-model" }
ruststack-dynamodb-http = { path = "crates/ruststack-dynamodb-http" }
ruststack-dynamodb-core = { path = "crates/ruststack-dynamodb-core" }

# Async runtime
tokio = { version = "1.49", features = [
  "rt-multi-thread",
  "macros",
  "signal",
  "sync",
  "time",
  "io-util",
  "fs",
  "net",
] }

# HTTP / networking
hyper = { version = "1.8", features = ["server", "http1", "http2"] }
hyper-util = { version = "0.1", features = [
  "tokio",
  "server-auto",
  "server-graceful",
] }
http = "1.4"
http-body-util = "0.1"

# Serialization
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
quick-xml = "0.39"

# Error handling
anyhow = "1.0"
thiserror = "2.0"

# Concurrent data structures
dashmap = "6.1"
parking_lot = "0.12"

# Crypto / checksums
md-5 = "0.10"
sha1 = "0.10"
sha2 = "0.10"
crc32fast = "1.5"
crc32c = "0.6"
base64 = "0.22"
hex = "0.4"
hmac = "0.12"
digest = "0.10"
subtle = "2.6"

# Time / IDs
chrono = { version = "0.4", features = ["serde"] }
time = "0.3.47"
uuid = { version = "1.21", features = ["v4"] }

# Logging / tracing
tracing = "0.1"
tracing-subscriber = { version = "0.3", features = ["env-filter", "json"] }

# Async utilities
async-trait = "0.1"

# Utilities
bytes = "1.11"
rand = "0.9"
tempfile = "3.26"
percent-encoding = "2.3"
mime = "0.3"
futures = "0.3"
pin-project-lite = "0.2"
typed-builder = "0.23"

# Testing
tokio-test = "0.4"
aws-config = "1.8"
aws-sdk-s3 = "1.124"
aws-sdk-dynamodb = "1.72"
aws-credential-types = "1.2"
aws-smithy-runtime-api = "1.11"
